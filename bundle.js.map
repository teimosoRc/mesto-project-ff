{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export function createCard({\r\n  data,\r\n  onDelete,\r\n  onLike,\r\n  currentUserId,\r\n  onImageClick,\r\n}) {\r\n  const templateCard = document.querySelector(\"#card-template\").content;\r\n  const cardElement = templateCard\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const deleteCardButton = cardElement.querySelector(\".card__delete-button\");\r\n\r\n  const cardLike = cardElement.querySelector(\".card__like-button\");\r\n  const imgCard = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const counter = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  imgCard.src = data.link;\r\n  imgCard.alt = data.name;\r\n  cardTitle.textContent = data.name;\r\n\r\n  // console.log(currentUserId);\r\n\r\n  if (data.likes.length) {\r\n    counter.classList.add(\"card__like-counter_is-active\");\r\n    counter.textContent = data.likes.length;\r\n  }\r\n\r\n  if (data.likes.find((owner) => owner[\"_id\"] === currentUserId)) {\r\n    cardLike.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  cardLike.addEventListener(\"click\", (evt) => {\r\n    onLike({\r\n      cardId: data[\"_id\"],\r\n      buttonElement: cardLike,\r\n      counterElement: counter,\r\n    });\r\n  });\r\n\r\n  imgCard.addEventListener(\"click\", (evt) => {\r\n    const data = { name: evt.target.alt, link: evt.target.src };\r\n    onImageClick(data);\r\n  });\r\n\r\n  if (data.owner[\"_id\"] === currentUserId) {\r\n    deleteCardButton.classList.add(\"card__delete-button_is-active\");\r\n    deleteCardButton.addEventListener(\"click\", () => {\r\n      onDelete({\r\n        cardId: data[\"_id\"],\r\n        cardElement: cardElement,\r\n        buttonElement: deleteCardButton,\r\n      });\r\n    });\r\n  }\r\n\r\n  return cardElement;\r\n}\r\n","function handlerKeydown (evt) {\r\n  if (evt.key === 'Escape') {\r\n    closeModal(document.querySelector('.popup_is-opened'))\r\n  }\r\n}\r\n\r\nexport function openModal (element) {\r\n  element.classList.add('popup_is-opened')\r\n  document.addEventListener('keydown', handlerKeydown)\r\n}\r\n\r\nexport function closeModal (element) {\r\n  element.classList.remove('popup_is-opened')\r\n  document.removeEventListener('keydown', handlerKeydown)\r\n}\r\n\r\nexport const handleModalClick = (event) => {\r\n  if (event.target.classList.contains('popup_is-opened')) {\r\n    return closeModal(event.target);\r\n  }\r\n\r\n  if (event.target.closest('.popup__close')) {\r\n    return closeModal(event.target.closest('.popup'));\r\n  }\r\n};","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-29\",\r\n  headers: {\r\n    authorization: \"5f021d0d-13ed-496f-9b89-19493d921125\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const createCardApi = ({ name, link }) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      name,\r\n      link,\r\n    }),\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const getUser = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const editProfileUser = ({ name, about }) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      about,\r\n    }),\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const likeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const unLikeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const deleteCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    headers: config.headers,\r\n    method: \"DELETE\",\r\n  }).then(errorHandler);\r\n};\r\n\r\nexport const updateUserAvatar = (url) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    headers: config.headers,\r\n    method: \"PATCH\",\r\n    body: JSON.stringify({\r\n      avatar: url,\r\n    }),\r\n  }).then(errorHandler);\r\n};\r\n\r\nconst errorHandler = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard } from \"./components/card.js\";\r\nimport { cardData } from \"./components/cards.js\";\r\nimport { openModal, closeModal, handleModalClick } from \"./components/modal.js\";\r\n\r\nimport {\r\n  getInitialCards,\r\n  createCardApi,\r\n  likeCard,\r\n  unLikeCard,\r\n  getUser,\r\n  editProfileUser,\r\n  deleteCard,\r\n  updateUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nconst cardList = document.querySelector(\".places__list\");\r\n//форма профиля\r\nconst editProfileForm = document.forms[\"edit-profile\"];\r\nconst nameInput = editProfileForm.elements.name;\r\nconst descriptionInput = editProfileForm.elements.description;\r\nconst profileFormSubmitButton = editProfileForm.querySelector(\".popup__button\");\r\n\r\n// форма новой карточки\r\nconst newPlaceForm = document.forms[\"new-place\"];\r\nconst nameInputImage = newPlaceForm.elements[\"place-name\"];\r\nconst linkInputImage = newPlaceForm.elements.link;\r\nconst cardFormSubmitButton = newPlaceForm.querySelector(\".popup__button\");\r\n\r\n// кнопки\r\nconst editProfileButton = document.querySelector(\".profile__edit-button\");\r\nconst addCardButton = document.querySelector(\".profile__add-button\");\r\nconst profileImageButton = document.querySelector(\".profile__image\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\n// поля профиля\r\nconst profileName = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\n// форма аватара\r\nconst profileImageForm = document.forms[\"edit-avatar\"];\r\nconst profileImageInput = profileImageForm.elements.avatar;\r\nconst profileImageFormSubmitButton =\r\n  profileImageForm.querySelector(\".popup__button\");\r\n\r\n// модалки\r\nconst popupProfile = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\nconst popupAvatarProfile = document.querySelector(\".popup_type_edit-avatar\");\r\n\r\nconst popupImageCard = popupImage.querySelector(\".popup__image\");\r\nconst popupCaption = popupImage.querySelector(\".popup__caption\");\r\n\r\nfunction setUserInfo({ name, about, avatar }) {\r\n  profileName.textContent = name;\r\n  profileDescription.textContent = about;\r\n  profileImageButton.style.backgroundImage = `url(${avatar})`;\r\n}\r\n\r\nfunction handleEditProfile() {\r\n  openModal(popupProfile);\r\n  nameInput.value = profileName.textContent;\r\n  descriptionInput.value = profileDescription.textContent;\r\n}\r\n\r\nfunction handleAddCard() {\r\n  openModal(popupNewCard);\r\n}\r\n\r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading({\r\n    buttonElement: profileFormSubmitButton,\r\n    isLoading: true,\r\n  });\r\n\r\n  editProfileUser({\r\n    name: nameInput.value,\r\n    about: descriptionInput.value,\r\n  })\r\n    .then(({ name, about, avatar }) => {\r\n      setUserInfo({\r\n        name,\r\n        about,\r\n        avatar,\r\n      });\r\n\r\n      closeModal(popupProfile);\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    })\r\n    .finally(() => {\r\n      renderLoading({\r\n        buttonElement: profileFormSubmitButton,\r\n        isLoading: false,\r\n      });\r\n    });\r\n}\r\n\r\nfunction handleCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading({\r\n    buttonElement: cardFormSubmitButton,\r\n    isLoading: true,\r\n  });\r\n\r\n  createCardApi({\r\n    name: nameInputImage.value,\r\n    link: linkInputImage.value,\r\n  })\r\n    .then((cardData) => {\r\n      cardList.prepend(\r\n        createCard({\r\n          data: cardData,\r\n          onDelete: deleteCardHandler,\r\n          onLike: handleLikeCard,\r\n          onImageClick: handleShowCard,\r\n          currentUserId: cardData.owner[\"_id\"],\r\n        })\r\n      );\r\n      closeModal(popupNewCard);\r\n      newPlaceForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    })\r\n    .finally(() => {\r\n      renderLoading({\r\n        buttonElement: cardFormSubmitButton,\r\n        isLoading: false,\r\n      });\r\n    });\r\n}\r\n\r\nfunction handleShowCard(data) {\r\n  openModal(popupImage);\r\n  popupImageCard.src = data.link;\r\n  popupImageCard.alt = data.name;\r\n  popupCaption.textContent = data.name;\r\n}\r\n\r\nfunction deleteCardHandler({ cardId, buttonElement }) {\r\n  deleteCard(cardId);\r\n}\r\n\r\nfunction handleLikeCard({ cardId, buttonElement, counterElement }) {\r\n  buttonElement.disabled = true;\r\n  const isActiveLike = buttonElement.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n\r\n  if (isActiveLike) {\r\n    unLikeCard(cardId)\r\n      .then(({ likes }) => {\r\n        buttonElement.classList.remove(\"card__like-button_is-active\");\r\n\r\n        if (likes.length) {\r\n          counterElement.classList.add(\"card__like-counter_is-active\");\r\n          counterElement.textContent = likes.length;\r\n        } else {\r\n          counterElement.classList.remove(\"card__like-counter_is-active\");\r\n          counterElement.textContent = \"\";\r\n        }\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => {\r\n        buttonElement.disabled = false;\r\n      });\r\n  } else {\r\n    likeCard(cardId)\r\n      .then(({ likes }) => {\r\n        buttonElement.classList.add(\"card__like-button_is-active\");\r\n\r\n        counterElement.classList.add(\"card__like-counter_is-active\");\r\n        counterElement.textContent = likes.length;\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => {\r\n        buttonElement.disabled = false;\r\n      });\r\n  }\r\n}\r\n\r\nconst handleProfileImageFormSubmit = (event) => {\r\n  event.preventDefault();\r\n\r\n  renderLoading({\r\n    buttonElement: profileImageFormSubmitButton,\r\n    isLoading: true,\r\n  });\r\n\r\n  updateUserAvatar(profileImageInput.value)\r\n    .then(({ name, about, avatar }) => {\r\n      setUserInfo({\r\n        name,\r\n        description: about,\r\n        avatar,\r\n      });\r\n\r\n      closeModal(popupAvatarProfile);\r\n    })\r\n    .catch((error) => {\r\n      console.error(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading({\r\n        buttonElement: profileImageFormSubmitButton,\r\n        isLoading: false,\r\n      });\r\n    });\r\n};\r\n\r\nconst renderLoading = ({ buttonElement, isLoading }) => {\r\n  if (isLoading) {\r\n    buttonElement.textContent = \"Сохранение...\";\r\n  } else {\r\n    buttonElement.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\nconst handleProfileImageClick = () => {\r\n  profileImageForm.reset();\r\n\r\n  openModal(popupAvatarProfile);\r\n};\r\n\r\naddCardButton.addEventListener(\"click\", handleAddCard);\r\neditProfileButton.addEventListener(\"click\", handleEditProfile);\r\nprofileImage.addEventListener(\"click\", handleProfileImageClick);\r\n\r\npopupProfile.addEventListener(\"click\", handleModalClick);\r\npopupNewCard.addEventListener(\"click\", handleModalClick);\r\npopupImage.addEventListener(\"click\", handleModalClick);\r\npopupAvatarProfile.addEventListener(\"click\", handleModalClick);\r\n\r\neditProfileForm.addEventListener(\"submit\", handleProfileFormSubmit);\r\nnewPlaceForm.addEventListener(\"submit\", handleCardFormSubmit);\r\nprofileImageForm.addEventListener(\"submit\", handleProfileImageFormSubmit);\r\n\r\nPromise.all([getUser(), getInitialCards()])\r\n  .then(([{ name, about, avatar, [\"_id\"]: currentUserId }, cardsData]) => {\r\n    setUserInfo({\r\n      name,\r\n      about,\r\n      avatar,\r\n    });\r\n\r\n    cardsData.forEach((cardData) => {\r\n      cardList.append(\r\n        createCard({\r\n          currentUserId,\r\n          data: cardData,\r\n          onDelete: deleteCardHandler,\r\n          onLike: handleLikeCard,\r\n          onImageClick: handleShowCard,\r\n        })\r\n      );\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(err);\r\n  });\r\n"],"names":["createCard","_ref","data","onDelete","onLike","currentUserId","onImageClick","cardElement","document","querySelector","content","cloneNode","deleteCardButton","cardLike","imgCard","cardTitle","counter","src","link","alt","name","textContent","likes","length","classList","add","find","owner","addEventListener","evt","cardId","buttonElement","counterElement","target","handlerKeydown","key","closeModal","openModal","element","remove","removeEventListener","handleModalClick","event","contains","closest","config","baseUrl","headers","authorization","errorHandler","res","ok","json","Promise","reject","concat","status","cardList","editProfileForm","forms","nameInput","elements","descriptionInput","description","profileFormSubmitButton","newPlaceForm","nameInputImage","linkInputImage","cardFormSubmitButton","editProfileButton","addCardButton","profileImageButton","profileImage","profileName","profileDescription","profileImageForm","profileImageInput","avatar","profileImageFormSubmitButton","popupProfile","popupNewCard","popupImage","popupAvatarProfile","popupImageCard","popupCaption","setUserInfo","about","style","backgroundImage","handleShowCard","deleteCardHandler","_ref3","fetch","method","then","deleteCard","handleLikeCard","_ref4","disabled","unLikeCard","_ref5","catch","err","console","error","finally","likeCard","_ref6","renderLoading","_ref8","isLoading","value","reset","_ref2","preventDefault","body","JSON","stringify","cardData","prepend","url","_ref7","all","_ref9","_ref10","_ref10$","cardsData","forEach","append"],"sourceRoot":""}